package sf.sort.sort.cmp.bubble;

import org.junit.Test;
import sf.sort.Sort;

import java.util.Arrays;

// å†’æ³¡æ’åº
//    æœ€å¥½ O(n) æœ€åO(n^2) å¹³å‡O(n^2) é¢å¤–ç©ºé—´å¤æ‚åº¦O(1) In-place âˆš ç¨³å®šæ€§ âˆš
// è§‚å¯Ÿ: æœ‰åº/æ— åºåºåˆ—ä¸­,ä»»æ„/æ€»æœ‰ä¸€å¯¹ç›¸é‚»å…ƒç´ é¡ºåº/é€†åº
// æ‰«æäº¤æ¢: ä¾æ¬¡æ¯”è¾ƒæ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ ,å¦‚æœæœ‰å¿…è¦,äº¤æ¢ä¹‹.è‹¥æ•´è¶Ÿæ‰«æéƒ½æ²¡æœ‰è¿›è¡Œäº¤æ¢,åˆ™æ’åºå®Œæˆ;å¦åˆ™,å†åšä¸€è¶Ÿæ‰«æäº¤æ¢;
@SuppressWarnings("unused")
public class BubbleSort1<T extends Comparable<T>> extends Sort<T> {
    // é—®é¢˜: æ— åºåºåˆ—{5,8,6,3,9,2,1,7},å¸Œæœ›ä»å°åˆ°å¤§çš„é¡ºåºå¯¹é½è¿›è¡Œæ’åº
    //    æŒ‰ç…§å†’æ³¡æ’åºçš„æ€æƒ³,æˆ‘ä»¬è¦æŠŠç›¸é‚»çš„å…ƒç´ ä¸¤ä¸¤æ¯”è¾ƒ,å½“ä¸€ä¸ªå…ƒç´ å¤§äºå³ä¾§ç›¸é‚»å…ƒç´ æ—¶,
    // äº¤æ¢å®ƒä»¬çš„ä½ç½®;å½“ä¸€ä¸ªå…ƒç´ å°äºæˆ–ç­‰äºå³ä¾§ç›¸é‚»å…ƒç´ æ—¶,ä½ç½®ä¸å˜ã€‚æœ€ç»ˆå¯¼è‡´çš„ç»“æœå°±æ˜¯
    // æ¯ä¸€è½®ç»“æœ,æœ«å°¾æœ‰åºåŒºåŸŸå¢åŠ ä¸€ä¸ª,ç›´åˆ°æœ‰åºåŒºåŸŸè¦†ç›–åˆ°(å…ƒç´ æ•°é‡-1)å¤§å°ä¸ºæ­¢,å› ä¸ºå‰©ä¸‹
    // æœ€åä¸€ä¸ªè‡ªç„¶æœ‰åº.
    //    æ¯ä¸€è½®éƒ½è¦éå†æ— åºåŒºåŸŸ,ä½¿å¾—æœ‰åºåŒºåŸŸå¢åŠ ,å…±éå†(å…ƒç´ æ•°é‡-1)è®º,æ‰€ä»¥æ—¶é—´å¤æ‚åº¦
    // æ˜¯O(n^2)
    @Override
    protected void sort() {
        for (int end = array.length - 1; end > 0; end--) {         // ä»1å¼€å§‹,åˆ°æœ«å°¾,å½“å†™è¿™ä¸ªå¾ªç¯,ä»…ä»…è¿›è¡Œäº†ä¸€è½®æ­¥éª¤1,æœ«å°¾åªç¡®å®šäº†ä¸€ä¸ªæœ€å¤§çš„å€¼,å‰©ä¸‹çš„è¿˜æ˜¯ä¹±åºçš„,åº”è¯¥æ‰§è¡Œarray.lengthé,æ¯éå¿½ç•¥æ›¾ç»æ‰¾åˆ°çš„æœ€å¤§å€¼,æ‰èƒ½
            for (int begin = 1; begin <= end; begin++) {
                if (cmp(begin, begin - 1) < 0) { // array[begin] < array[begin - 1] æ¯”å¤§å°,å‘ç°æƒ…å†µä¸å¯¹,äº¤æ¢
                    swap(begin, begin - 1);
                }
            }
        }
    }


    /*æµ‹è¯•ä¸å†’æ³¡æ’åºå˜ä½“*/
    @Test
    public void sortTest() {
        int[] ints = {5, 8, 6, 3, 9, 2, 1, 7};
        sort2(ints);
        System.out.println(Arrays.toString(ints));
    }

    // ä½¿ç”¨åŒå¾ªç¯è¿›è¡Œæ’åº,å¤–éƒ¨å¾ªç¯æ§åˆ¶æ‰€æœ‰çš„å›åˆ,å†…éƒ¨å¾ªç¯å®ç°æ¯ä¸€è½®çš„å†’æ³¡å‡ºæ¥,è¿›è¡Œå…ƒç´ æ¯”è¾ƒ,å†è¿›è¡Œå…ƒç´ äº¤æ¢
    // å¯¹äºarray.lengthæ˜¯å¦-1,ä¸ç­‰å¼æ˜¯â‰¥/â‰¤è¿˜æ˜¯>/<,é€šå¸¸å…ˆè€ƒè™‘è¾¹ç•Œæƒ…å†µ,ä¸éœ€è¦æ­»è®°ç¡¬èƒŒ.
    public void sort(int[] array) {
        for (int i = 0; i < array.length - 1; i++) {
            for (int j = 0; j < array.length - 1 - i; j++) {
                int tmp;
                if (array[j] > array[j + 1]) {
                    tmp = array[j];
                    array[j] = array[j + 1];
                    array[j + 1] = tmp;
                }
            }
        }
    }

    public void sort2(int[] array) {
        for (int i = 0; i < array.length - 1; i++) {
            for (int j = 1; j < array.length - i; j++) {
                int tmp;
                if (array[j - 1] > array[j]) {
                    tmp = array[j - 1];
                    array[j - 1] = array[j];
                    array[j] = tmp;
                }
            }
        }
    }

    public void sort3(int[] array) {

        for (int end = array.length - 1; end > 0; end--) { // endåº”è¯¥ä»æœ€åä¸€ä¸ªç´¢å¼•å¼€å§‹,ä¸æ–­çš„--,å‡åˆ°0[å› ä¸ºæ— æ³•æ‹¿å·¦è¾¹çš„æ¥æ¯”äº†,æ²¡æœ‰å…ƒç´ äº†]
            for (int begin = 1; begin <= end; begin++) {  //  ä¸èƒ½å¿½ç•¥æœ€åä¸€ä½å’Œå‰ä¸€ä½çš„æ¯”è¾ƒ
                int tmp;
                if (array[begin - 1] > array[begin]) {
                    tmp = array[begin - 1];
                    array[begin - 1] = array[begin];
                    array[begin] = tmp;
                }
            }
        }
    }
}
// åŸåœ°ç®—æ³•(In-place Algorithm)
// ä½•ä¸ºåŸåœ°ç®—æ³•ï¼Ÿ
//  ä¸ä¾èµ–é¢å¤–çš„èµ„æºæˆ–è€…ä¾èµ–å°‘æ•°çš„é¢å¤–èµ„æºï¼Œä»…ä¾é è¾“å‡ºæ¥è¦†ç›–è¾“å…¥[å–å‡ºæ¥è¦†ç›–]
//  ç©ºé—´å¤æ‚åº¦ä¸º ğ‘‚(1) çš„éƒ½å¯ä»¥è®¤ä¸ºæ˜¯åŸåœ°ç®—æ³•
//éåŸåœ°ç®—æ³•ï¼Œç§°ä¸º Not-in-place æˆ–è€… Out-of-place
//å†’æ³¡æ’åºå±äº In-place
